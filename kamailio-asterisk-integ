Akkor a rendszer m≈±k√∂d√©si logik√°ja ez lesz:

üî∏ REGISTRATION

Kliens REGISTER ‚Üí Kamailio kapja.

Kamailio hiteles√≠t a auth_db modulon kereszt√ºl:

ha WITH_ASTERISK akt√≠v ‚Üí a ps_auths t√°bla az Asterisk MySQL adatb√°zisban.

Kamailio menti a usrloc t√°bl√°ba (√©s DB-be).

Kamailio tov√°bb√≠tja a REGISTER-t Asterisk fel√© (route[REGFWD]).

‚û°Ô∏è Az Asterisk is l√°tja, de a Kamailio a val√≥di registrar, teh√°t a h√≠v√°sok hozz√° j√∂nnek vissza.

üî∏ INVITE

Kliens INVITE ‚Üí Kamailio kapja.

Kamailio megn√©zi, hogy a request nem Asteriskt≈ël j√∂tt (!route(FROMASTERISK)).

route(TOASTERISK) ‚Üí az INVITE √°tmegy Asterisk fel√©.

Asterisk dialplan dolgozik ‚Üí h√≠v√°s m√°sik kliensre.

Asterisk visszak√ºldi az INVITE-et Kamaili√≥n kereszt√ºl ‚Üí Kamailio usrloc alapj√°n megtal√°lja a c√©l klienst ‚Üí tov√°bb√≠tja.

3. Auth integr√°ci√≥ ‚Äì fontos r√©szlet

Ez a r√©sz:

#!ifdef WITH_ASTERISK
modparam("auth_db", "user_column", "id")
modparam("auth_db", "password_column", "password")
modparam("auth_db", "db_url", DBASTURL)
modparam("auth_db", "version_table", 0)
#!else
modparam("auth_db", "db_url", DBURL)
modparam("auth_db", "password_column", "password")
modparam("auth_db", "use_domain", MULTIDOMAIN)
#!endif


Azt jelenti, hogy:

Ha WITH_ASTERISK akt√≠v, a Kamailio az Asterisk adatb√°zist haszn√°lja (DBASTURL).

Ahol a t√°bl√°k: ps_auths, ps_aors, ps_contacts (PJSIP schema).

Teh√°t nem kell k√ºl√∂n Kamailio subscriber t√°bla, a Kamailio az Asterisk PJSIP t√°bl√°kat olvassa a hiteles√≠t√©shez.

üîπ 4. Usrloc szinkron

Ez a r√©sz biztos√≠tja, hogy a Kamailio usrloc (helyi cache + DB) t√°rolja, ki mely IP-n van:

modparam("usrloc", "db_mode", 2)


‚Üí 2 = write-through:
mind mem√≥ri√°ban, mind adatb√°zisban friss√≠ti az adatokat.

√çgy Kamailio mindig tudja, melyik kliens hol √©rhet≈ë el, √©s nem kell az Asterisknek ezt kezelnie.

üîπ 5. Hol ker√ºl el≈ë az is_method hiba

Az is_method() f√ºggv√©ny a core parancsk√©szlet r√©sze.
Ha a config elej√©n hi√°nyzott a corex.so vagy siputils.so, akkor j√∂n az a hiba, amit √≠rt√°l kor√°bban.

Ebben a mostani configban viszont m√°r helyesen benne van:

loadmodule "corex.so"
loadmodule "siputils.so"


Teh√°t ezzel m√°r nem fog el≈ëj√∂nni.

üîπ 6. K√∂vetkez≈ë l√©p√©s (ha m≈±k√∂dik az indul√°s)

A k√∂vetkez≈ë, amit √©rdemes lesz megn√©zni:

hogy Kamailio val√≥ban l√°tja-e a regisztr√°ci√≥kat:

kamcmd ul.dump


√©s hogy Asterisk oldalon a peer st√°tusz mit mutat (pjsip show contacts).

üîπ √ñsszefoglal√°s ‚Äì ez a konfigur√°ci√≥:

‚úÖ Kamailio fogadja √©s t√°rolja a regisztr√°ci√≥kat
‚úÖ Kamailio hiteles√≠t az Asterisk ps_auths t√°bl√°b√≥l
‚úÖ Kamailio tov√°bb√≠tja a REGISTER-t az Asterisk fel√©
‚úÖ Kamailio tov√°bb√≠tja az INVITE-et az Asterisk fel√©
‚úÖ Kamailio a usrloc seg√≠ts√©g√©vel megtal√°lja a h√≠vottat
‚úÖ Asterisk a dialplan logik√°t kezeli
‚úÖ Kamailio leveszi a REGISTER terhel√©st az Asteriskr≈ël

C√©lrendszer:

Kamailio = Registrar + Proxy

Asterisk = Dialplan, logika, m√©dia, h√≠v√°sfel√©p√≠t√©s

üì° √Åraml√°s:
Kliens ‚áÑ Kamailio ‚áÑ Asterisk ‚áÑ Kamailio ‚áÑ Kliens

sorcery.conf

A Kamailio az Asterisk adatb√°zisban lev≈ë ps_auths, ps_aors, ps_contacts t√°bl√°kat fogja olvasni, ez√©rt Asterisknek is azokat kell haszn√°lni.

Nyisd meg:

/etc/asterisk/sorcery.conf


√âs ellen≈ërizd vagy add hozz√° a k√∂vetkez≈ë sorokat:

[res_pjsip]
auth=realtime,ps_auths
aor=realtime,ps_aors
endpoint=realtime,ps_endpoints
domain_alias=realtime,ps_domain_aliases
identify=realtime,ps_identify
registration=realtime,ps_registrations
contact=realtime,ps_contacts

Ez biztos√≠tja, hogy minden PJSIP entit√°s MySQL-b≈ël j√∂n, ugyanabb√≥l az adatb√°zisb√≥l, amit a Kamailio is haszn√°l.
2Ô∏è‚É£ pjsip.conf

Mivel a PJSIP adatok DB-b≈ël j√∂nnek, a pjsip.conf szinte √ºres lesz.
Csak az √°ltal√°nos glob√°lis be√°ll√≠t√°sokat hagyd meg:

[global]
type=global
user_agent=Asterisk PBX

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
local_net=192.168.0.0/24   ; <-- a te bels≈ë h√°l√≥zatod
external_media_address=PUBLIC_IP
external_signaling_address=PUBLIC_IP


A kliensek nem k√∂zvetlen√ºl az Asteriskhez regisztr√°lnak, hanem Kamaili√≥n kereszt√ºl, ez√©rt a transport-udp csak az Asterisk √©s Kamailio k√∂zti kommunik√°ci√≥hoz kell.

3Ô∏è‚É£ extconfig.conf

Ez mondja meg az Asterisknek, hol van az adatb√°zis:

ps_endpoints => odbc,asterisk
ps_auths => odbc,asterisk
ps_aors => odbc,asterisk
ps_domain_aliases => odbc,asterisk
ps_contacts => odbc,asterisk
ps_registrations => odbc,asterisk
ps_identify => odbc,asterisk


Ehhez persze az res_odbc.conf-ban legyen egy asterisk DSN defini√°lva.

4Ô∏è‚É£ res_odbc.conf
[asterisk]
enabled=yes
dsn=MySQL-asterisk
username=asterisk
password=asteriskpass
pre-connect=yes


A dsn itt a /etc/odbc.ini-ben defini√°lt ODBC kapcsolat neve, pl.:

[MySQL-asterisk]
Description=MySQL Asterisk database
Driver=MySQL
Server=127.0.0.1
Database=asterisk
User=asterisk
Password=asteriskpass
Port=3306
Option=3

5Ô∏è‚É£ Kamailio ‚Üí Asterisk forgalom

Az Asterisk az endpoint-ot Kamaili√≥k√©nt fogja l√°tni, nem k√∂zvetlen kliensk√©nt.

Ez√©rt a DB-ben kell egy statikus endpoint az Asterisk sz√°m√°ra, hogy Kamailio-t elfogadja:

p√©lda (ps_endpoints)
id	transport	aors	context	disallow	allow	direct_media
kamailio-endpoint	transport-udp	kamailio-aor	from-kamailio	all	ulaw,alaw	no

p√©lda (ps_aors)
id	max_contacts
kamailio-aor	1
p√©lda (ps_auths)
id	auth_type	username	password
kamailio-auth	userpass	kamailio	strongsecret

√çgy Kamailio hiteles√≠theti mag√°t Asterisk fel√©, ha sz√ºks√©ges.

6Ô∏è‚É£ Dialplan (extensions.conf vagy extensions.ael)

Mivel Kamailio tov√°bb√≠tja az INVITE-et Asterisk fel√©, a h√≠v√°slogika pontosan √∫gy m≈±k√∂dik, mint kor√°bban.
Teh√°t a dialplan maradhat:

[from-kamailio]
exten => _X.,1,NoOp(Processing call to ${EXTEN} from Kamailio)
 same => n,Dial(PJSIP/${EXTEN},30)
 same => n,Hangup()


Itt Asterisk megn√©zi a c√©l usert, √©s mivel a PJSIP user a DB-ben benne van, tudni fogja, hogy az adott usernek milyen aor-ja van ‚Äî de a val√≥s IP/Contact-ot Kamailio kezeli.

7Ô∏è‚É£ Ellen≈ërz√©s

Ha minden j√≥l van be√°ll√≠tva:

Kamailio oldal:
kamcmd ul.dump


‚Üí l√°tod a kliensek regisztr√°ci√≥it (IP, contact, stb.)

Asterisk oldal:
asterisk -rx "pjsip show endpoints"
asterisk -rx "pjsip show contacts"


‚Üí itt m√°r nem kell minden kliensnek megjelennie, mert Asterisk a h√≠v√°sokat Kamaili√≥n kereszt√ºl int√©zi, de a Kamailio regisztr√°lt usereket tov√°bbra is el√©ri.

‚öôÔ∏è √ñsszefoglal√°s
Funkci√≥	Komponens
REGISTER kezel√©se	Kamailio
Authentication	Kamailio (Asterisk DB-b≈ël)
Location service	Kamailio usrloc
Dialplan / Logika	Asterisk
M√©dia / RTP	Asterisk
Userek / Auth / AOR	K√∂z√∂s MySQL DB (ps_ t√°bl√°k)

1Ô∏è‚É£ MySQL a Kamailio g√©pen

A MySQL-nek engedni kell, hogy az Asterisk g√©p csatlakozzon.
P√©lda:

CREATE DATABASE asterisk;
CREATE USER 'asterisk'@'%' IDENTIFIED BY 'jelszo123';
GRANT ALL PRIVILEGES ON asterisk.* TO 'asterisk'@'%';
FLUSH PRIVILEGES;


üî∏ a % azt jelenti, hogy b√°rmilyen IP-r≈ël j√∂het kapcsolat
(ha biztons√°g miatt szeretn√©d, megadhatod az Asterisk g√©p IP-j√©t is, pl. 'asterisk'@'10.0.0.5')

2Ô∏è‚É£ Asterisk g√©pen (res_odbc.conf)
[asterisk]
enabled=yes
dsn=MySQL-asterisk
username=asterisk
password=jelszo123
pre-connect=yes


√âs az /etc/odbc.ini-ben:

[MySQL-asterisk]
Description=Asterisk database on Kamailio host
Driver=MySQL
Server=kamailio_vm_ip
Database=asterisk
User=asterisk
Password=jelszo123
Port=3306
Option=3


‚ö†Ô∏è Fontos: a kamailio_vm_ip legyen az a VM IP-je, ahol a MySQL fut,
√©s a MySQL bind-address legyen 0.0.0.0, hogy t√°voli g√©pr≈ël is el√©rhet≈ë legyen.

3Ô∏è‚É£ Kamailio configban

Mivel a Kamailio is ugyanott fut, egyszer≈±en √≠gy √°ll√≠tsd be:

#!define WITH_MYSQL
#!define WITH_AUTH
#!define WITH_USRLOCDB
#!define WITH_ASTERISK

#!define DBURL "mysql://asterisk:jelszo123@localhost/asterisk"
#!define DBASTURL "mysql://asterisk:jelszo123@localhost/asterisk"


‚Üí mindkett≈ë ugyanaz az adatb√°zis, ugyanazon a g√©pen.
Kamailio √≠gy az Asterisk PJSIP t√°bl√°kb√≥l (ps_auths, ps_aors, ps_contacts) fog dolgozni.

4Ô∏è‚É£ Ellen≈ërz√©s parancsok

Kamailio oldalon:

kamcmd sql.query "select username,domain,ha1 from ps_auths"
kamcmd ul.dump


Asterisk oldalon:

asterisk -rx "pjsip show endpoints"


Ha mindkett≈ë l√°tja az adatokat ‚Üí a kapcsolat t√∂k√©letes.



‚úÖ √ñsszefoglalva:

Kamailio + MySQL egy g√©pen = j√≥

Asterisk k√ºl√∂n g√©pen, de az ottani res_odbc ‚Üí MySQL-re mutat = j√≥

Kamailio DBURL √©s DBASTURL ugyanaz = helyes

MySQL-nek engedni kell a t√°voli el√©r√©st (bind + grant)

1Ô∏è‚É£ Alap adatb√°zis-s√©ma

Ha m√©g nincs meg az Asterisk PJSIP adatb√°zis, futtasd ezt a MySQL-en (a Kamailio g√©pen):

mysql -u root -p asterisk < /usr/share/asterisk/astdb.sql


Ez l√©trehozza a ps_endpoints, ps_auths, ps_aors, ps_contacts stb. t√°bl√°kat.
(Ha m√°r megvannak, ezt a l√©p√©st ne futtasd √∫jra.)

üë• 2Ô∏è‚É£ K√©t SIP-user p√©lda (1001 √©s 1002)

M√°sold be √©s futtasd a k√∂vetkez≈ë SQL-t a Kamailio/MySQL szerveren:

USE asterisk;

-- Felhaszn√°l√≥ 1001
INSERT INTO ps_aors (id, max_contacts) VALUES ('1001', 1)
ON DUPLICATE KEY UPDATE max_contacts=1;

INSERT INTO ps_auths (id, auth_type, password, username) 
VALUES ('1001', 'userpass', 'jelszo1001', '1001')
ON DUPLICATE KEY UPDATE password='jelszo1001';

INSERT INTO ps_endpoints (id, transport, aors, auth, context, disallow, allow)
VALUES ('1001', 'transport-udp', '1001', '1001', 'from-internal', 'all', 'ulaw,alaw')
ON DUPLICATE KEY UPDATE aors='1001', auth='1001';

-- Felhaszn√°l√≥ 1002
INSERT INTO ps_aors (id, max_contacts) VALUES ('1002', 1)
ON DUPLICATE KEY UPDATE max_contacts=1;

INSERT INTO ps_auths (id, auth_type, password, username) 
VALUES ('1002', 'userpass', 'jelszo1002', '1002')
ON DUPLICATE KEY UPDATE password='jelszo1002';

INSERT INTO ps_endpoints (id, transport, aors, auth, context, disallow, allow)
VALUES ('1002', 'transport-udp', '1002', '1002', 'from-internal', 'all', 'ulaw,alaw')
ON DUPLICATE KEY UPDATE aors='1002', auth='1002';

‚öôÔ∏è 3Ô∏è‚É£ Asterisk-oldali kieg√©sz√≠t√©sek
/etc/asterisk/pjsip.conf

Ne legyenek benne user-defin√≠ci√≥k!
Csak ez maradjon benne (vagy b≈ëv√≠tsd √≠gy):

[global]
type=global
endpoint_identifier_order=username,ip,anonymous

[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0

/etc/asterisk/exten.conf

Egy egyszer≈± bels≈ë h√≠v√°si logika:

[from-internal]
exten => _X.,1,NoOp(Incoming call to ${EXTEN})
 same => n,Dial(PJSIP/${EXTEN},20)
 same => n,Hangup()


Ez azt jelenti: ha 1001 h√≠vja 1002-t ‚Üí Asterisk h√≠v√°st √©p√≠t PJSIP-on kereszt√ºl.

üì° 4Ô∏è‚É£ Kamailio be√°ll√≠t√°sok

A Kamailio-ban ez legyen a DB-URL:

#!define DBURL "mysql://asterisk:jelszo123@localhost/asterisk"
#!define DBASTURL "mysql://asterisk:jelszo123@localhost/asterisk"

üß™ 5Ô∏è‚É£ Tesztel√©s

Ind√≠tsd √∫jra:

systemctl restart kamailio
systemctl restart asterisk


Ellen≈ërz√©s Asterisk oldalon:

asterisk -rx "pjsip show endpoints"


L√°tnod kell:

Endpoint:  1001/1001  ...
Endpoint:  1002/1002  ...


Kapcsold be SIP-klienst (pl. MicroSIP, Linphone, Zoiper):

SIP szerver: Kamailio IP-je

Felhaszn√°l√≥: 1001

Jelsz√≥: jelszo1001

M√°sik kliens: 1002 / jelszo1002

Ha mindkett≈ë regisztr√°l, a Kamailio logban l√°tod:

REGISTER received for 1001
REGISTER saved to usrloc


Pr√≥b√°ld h√≠vni:
1001 ‚Üí 1002
‚Üí Ha mindent j√≥l csin√°ltunk, Asterisk cseng√©st ind√≠t.

Ha k√©red, adok egy teljes Kamailio config p√©ld√°t is ehhez (csak a l√©nyeges r√©szekkel: usrloc, auth, dispatcher Asterisk fel√©, forward INVITE).

Futtasd ezt a MySQL-ben (root-k√©nt vagy asterisk userrel):

CREATE DATABASE IF NOT EXISTS asterisk CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE asterisk;

-- ===========================
-- PJSIP REALTIME TABLES
-- ===========================

CREATE TABLE IF NOT EXISTS ps_endpoints (
    id VARCHAR(40) NOT NULL PRIMARY KEY,
    transport VARCHAR(40),
    aors VARCHAR(200),
    auth VARCHAR(40),
    context VARCHAR(40),
    disallow VARCHAR(200),
    allow VARCHAR(200),
    direct_media VARCHAR(5),
    connected_line_method VARCHAR(20),
    direct_media_method VARCHAR(20),
    rewrite_contact VARCHAR(5),
    rtp_symmetric VARCHAR(5),
    force_rport VARCHAR(5),
    ice_support VARCHAR(5),
    rtcp_mux VARCHAR(5),
    dtmf_mode VARCHAR(20)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE IF NOT EXISTS ps_auths (
    id VARCHAR(40) NOT NULL PRIMARY KEY,
    auth_type VARCHAR(20),
    password VARCHAR(80),
    realm VARCHAR(40),
    username VARCHAR(40)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE IF NOT EXISTS ps_aors (
    id VARCHAR(40) NOT NULL PRIMARY KEY,
    contact VARCHAR(200),
    max_contacts INT(11),
    remove_existing VARCHAR(5),
    qualify_frequency INT(11)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE IF NOT EXISTS ps_contacts (
    id VARCHAR(255) NOT NULL PRIMARY KEY,
    uri VARCHAR(255),
    expiration_time DATETIME,
    qualify_frequency INT(11),
    outbound_proxy VARCHAR(255),
    path VARCHAR(255),
    user_agent VARCHAR(255),
    reg_server VARCHAR(255),
    authenticate_qualify VARCHAR(5),
    via_addr VARCHAR(255),
    via_port INT(11),
    call_id VARCHAR(255),
    endpoint VARCHAR(100),
    prune_on_boot VARCHAR(5)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

CREATE TABLE IF NOT EXISTS ps_transports (
    id VARCHAR(40) NOT NULL PRIMARY KEY,
    type VARCHAR(20),
    protocol VARCHAR(20),
    bind VARCHAR(40),
    local_net VARCHAR(40),
    external_media_address VARCHAR(40),
    external_signaling_address VARCHAR(40),
    external_signaling_port INT(11),
    domain VARCHAR(40)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- ===========================
-- 2 TEST USERS (1001, 1002)
-- ===========================

-- User 1001
INSERT INTO ps_aors (id, max_contacts) VALUES ('1001', 1)
ON DUPLICATE KEY UPDATE max_contacts=1;

INSERT INTO ps_auths (id, auth_type, password, username)
VALUES ('1001', 'userpass', 'jelszo1001', '1001')
ON DUPLICATE KEY UPDATE password='jelszo1001';

INSERT INTO ps_endpoints (id, transport, aors, auth, context, disallow, allow, direct_media)
VALUES ('1001', 'transport-udp', '1001', '1001', 'from-internal', 'all', 'ulaw,alaw', 'no')
ON DUPLICATE KEY UPDATE aors='1001', auth='1001';

-- User 1002
INSERT INTO ps_aors (id, max_contacts) VALUES ('1002', 1)
ON DUPLICATE KEY UPDATE max_contacts=1;

INSERT INTO ps_auths (id, auth_type, password, username)
VALUES ('1002', 'userpass', 'jelszo1002', '1002')
ON DUPLICATE KEY UPDATE password='jelszo1002';

INSERT INTO ps_endpoints (id, transport, aors, auth, context, disallow, allow, direct_media)
VALUES ('1002', 'transport-udp', '1002', '1002', 'from-internal', 'all', 'ulaw,alaw', 'no')
ON DUPLICATE KEY UPDATE aors='1002', auth='1002';

-- ===========================
-- OPTIONAL: Transport definition
-- ===========================
INSERT INTO ps_transports (id, type, protocol, bind)
VALUES ('transport-udp', 'transport', 'udp', '0.0.0.0:5060')
ON DUPLICATE KEY UPDATE protocol='udp';

‚úÖ Mit kapsz ett≈ël?

Ez l√©trehozza:

ps_endpoints, ps_auths, ps_aors, ps_contacts, ps_transports

k√©t m≈±k√∂d≈ë felhaszn√°l√≥t (1001 / 1002)

1 db UDP transportot (transport-udp)

üîç Ellen≈ërz√©s

Futtasd:

mysql -u root -p asterisk -e "show tables like 'ps_%';"


√©s azt√°n:

mysql -u root -p asterisk -e "select id,username from ps_auths;"


Ha l√°tod:

id     username
1001   1001
1002   1002


akkor minden rendben van üéØ

Ha akarod, a k√∂vetkez≈ë l√©p√©sben megmutatom, hogyan √≠rjuk meg ehhez a Kamailio configot (ami:

hiteles√≠ti a usereket ebb≈ël a DB-b≈ël,

a regisztr√°ci√≥kat usrloc-ba menti,

√©s a h√≠v√°sokat az Asterisk fel√© tov√°bb√≠tja).

Nagyon j√≥ üí™ ‚Äî akkor j√∂jj√∂n egy komplett, m≈±k√∂d≈ë Kamailio konfigur√°ci√≥, ami:

‚úÖ a Kamaili√≥hoz regisztr√°l√≥dnak a kliensek
‚úÖ az Asterisk az adatb√°zist k√∂z√∂sen l√°tja
‚úÖ a Kamailio v√©gzi az autentik√°ci√≥t √©s a usrloc kezel√©st
‚úÖ az INVITE-okat a megfelel≈ë Asterisk p√©ld√°nyhoz tov√°bb√≠tja

Ez a verzi√≥ egyetlen Asterisk node-hoz k√©sz√ºlt, teh√°t egyszer≈± √©s stabil alap.
Innen majd lehet tov√°bbfejleszteni t√∂bb node-os (dispatcher-es) topol√≥gi√°ra.

üß© 1Ô∏è‚É£ Ellen≈ërizd, hogy az ODBC kapcsolat m≈±k√∂dik

A PJSIP realtime konfigur√°ci√≥ ODBC-n kereszt√ºl kapcsol√≥dik a MySQL-hez.
Ezt a kapcsolatot el≈ësz√∂r parancssorb√≥l kell kipr√≥b√°lni.

Futtasd az Asterisk g√©pen:

isql -v MySQL-asterisk asterisk jelszo123


üëâ Ha ezt l√°tod:

+---------------------------------------+
| Connected!                            |
| SQL>                                  |


akkor az ODBC kapcsolat m≈±k√∂dik ‚úÖ

Ha hib√°t kapsz ([ISQL] ERROR vagy Can't connect), akkor:

az /etc/odbc.ini-ben ellen≈ërizd a Server, Database, User, Password mez≈ëket,

a /etc/odbcinst.ini-ben legyen √©rv√©nyes MySQL driver (pl. Driver=/usr/lib/x86_64-linux-gnu/odbc/libmyodbc5.so),

a MySQL bind-address engedje a t√°voli kapcsolatot (0.0.0.0 vagy az Asterisk IP-je),

√©s a MySQL usernek legyen GRANT ALL jogosults√°ga az Asterisk IP-re.

‚öôÔ∏è 2Ô∏è‚É£ Ellen≈ërizd az Asterisk ODBC r√©teget

Asterisk CLI-n:

asterisk -rx "odbc show all"


Ha j√≥l van be√°ll√≠tva, valami ilyet kell l√°tnod:

ODBC DSN Settings
-----------------
  Name:   asterisk
  DSN:    MySQL-asterisk
  Connected:  yes
  Number of active connections: 1 (out of 5)


‚û°Ô∏è Ha ‚ÄúConnected: yes‚Äù ‚Üí az Asterisk l√°tja a MySQL adatb√°zist!
Ha ‚ÄúConnected: no‚Äù vagy hiba, akkor val√≥sz√≠n≈±leg:

hib√°s DSN n√©v (res_odbc.conf ‚Üî /etc/odbc.ini nem egyezik),

rossz jelsz√≥ / host,

MySQL nincs el√©rhet≈ë porton (3306).

Linux (Debian/Ubuntu) telep√≠t√©s
sudo apt update
sudo apt install unixodbc unixodbc-dev
sudo apt install libmyodbc   # MySQL ODBC driver
